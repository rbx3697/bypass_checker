{% extends "base.html" %}

{% block content %}
<div class="card">
    <h1 class="neon-text">üê± –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ MeowTool Web!</h1>
    <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω. –í–∞—à ID: <strong>{{ user_id[:8] }}...</strong></p>
    
    <div class="features-grid">
        <div class="feature-card">
            <h3>üîç –ß–µ–∫–µ—Ä –∫—É–∫–∏</h3>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ Roblox –∫—É–∫–∏ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å, –±–∞–ª–∞–Ω—Å, –ø—Ä–µ–º–∏—É–º –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</p>
            <a href="/checker" class="neon-button">–ü–µ—Ä–µ–π—Ç–∏ –∫ —á–µ–∫–µ—Ä—É</a>
        </div>
        
        <div class="feature-card">
            <h3>üîì Bypass —Å–∏—Å—Ç–µ–º</h3>
            <p>–û–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã (13- –∏ 13-17)</p>
            <a href="/bypass" class="neon-button">–ü–µ—Ä–µ–π—Ç–∏ –∫ bypass</a>
        </div>
        
        <div class="feature-card">
            <h3>üìä –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h3>
            <p>–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –æ–ø–µ—Ä–∞—Ü–∏–π bypass</p>
            <a href="/dashboard" class="neon-button">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç</a>
        </div>
    </div>
</div>

<div class="card">
    <h2>üìà Real-time —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∞–π—Ç–∞</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-info">
                <div class="stat-number" id="stats-online">0</div>
                <div class="stat-label">–°–µ–π—á–∞—Å –æ–Ω–ª–∞–π–Ω</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üîç</div>
            <div class="stat-info">
                <div class="stat-number" id="stats-active">0</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üìä</div>
            <div class="stat-info">
                <div class="stat-number" id="stats-total">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üöÄ</div>
            <div class="stat-info">
                <div class="stat-number" id="stats-checks-min">0</div>
                <div class="stat-label">–ü—Ä–æ–≤–µ—Ä–æ–∫/–º–∏–Ω—É—Ç—É</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-info">
                <div class="stat-number" id="stats-bypass-min">0</div>
                <div class="stat-label">Bypass/–º–∏–Ω—É—Ç—É</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üë§</div>
            <div class="stat-info">
                <div class="stat-number" id="stats-active-users">0</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —é–∑–µ—Ä–æ–≤</div>
            </div>
        </div>
    </div>
    
    <div class="last-update">
        <small>–û–±–Ω–æ–≤–ª–µ–Ω–æ: <span id="last-update-time">—Ç–æ–ª—å–∫–æ —á—Ç–æ</span></small>
    </div>
</div>

<script>
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
function updateExtendedStats() {
    fetch('/api/stats')
        .then(response => response.json())
        .then(data => {
            // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            document.getElementById('stats-online').textContent = data.online_users;
            document.getElementById('stats-active').textContent = data.active_checks;
            document.getElementById('stats-total').textContent = data.total_checks;
            
            // Real-time —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            const rt = data.real_time_stats || {};
            document.getElementById('stats-checks-min').textContent = rt.checks_per_minute || 0;
            document.getElementById('stats-bypass-min').textContent = rt.successful_bypasses || 0;
            document.getElementById('stats-active-users').textContent = rt.active_users || 0;
            
            // –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            if (rt.last_update) {
                const updateTime = new Date(rt.last_update).toLocaleTimeString();
                document.getElementById('last-update-time').textContent = updateTime;
            }
        })
        .catch(error => console.error('Error updating stats:', error));
}

// –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
setInterval(updateExtendedStats, 5000);
updateExtendedStats();
</script>
{% endblock %}